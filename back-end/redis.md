### Q&A

- Redis都用在哪些地方 - 分担非必要的数据库连接，快速响应
  - 缓存 
  - 业务锁
- 缓存击穿怎么处理
  - 布隆过滤器 - 防治缓存击穿和缓存雪崩
  - 第一次查询redis没有，就去数据库里查询，如果还没有，回来就把redis的布隆过滤器设置上；第二次请求来时，布隆会拦截这个请求，就不去数据库里查询了。
- Redis数据同步的方法
  - 缓存没有就查数据库，查完了写到缓存同时返回
  - 专门有个job隔一段时间就去同步，但是就要牺牲一下实时性
  - 只在缓存里查数据，如果没有就发更新数据的命令到queue，又queue去执行查数据库的job，并在需要的时候设置布隆过滤器 - 需要业务上重试机制
- 数据库的数据辩变化，如何通知缓存更新，保证数据的一致性
  - 不允许直接操作数据库，通过API或者其他方式，在修改数据库数据的同时，同步数据到redis
- 使用Redis保存业务锁，处理并发问题，如果redis挂了怎么办？怎么设计即保证安全又保证性能？
  - 定时备份？
- 主从
  - 主数据库的操作写完binlog，通知从数据库来读取，从数据库读取后放到自己本地，并回放binlog
  - 第一次全量读，后面增量读
- 读写分离
  - 读从一个数据库，因为一般有大量读的请求，避免占用写的连接数
  - 写从另一个数据库
  - 设置x秒数据库间定时同步

